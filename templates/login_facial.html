<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Login Facial - BETUTM</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <script>
        // --- SCRIPT DE AUTO-DETECCI√ìN ---
        window.onload = function() {
            // Esperamos 3 segundos para que la c√°mara enfoque bien
            let tiempoEspera = 3000; 
            
            // Funci√≥n que simula el clic
            function intentarLogin() {
                let boton = document.querySelector('.btn-entrar');
                if(boton) {
                    boton.innerHTML = "üîÑ ESCA√ëEANDO..."; // Cambia texto
                    boton.style.backgroundColor = "#ffc107"; // Cambia a amarillo
                    boton.click(); // ¬°CLIC AUTOM√ÅTICO!
                }
            }

            // Iniciamos el temporizador
            setTimeout(intentarLogin, tiempoEspera);
        };
    </script>
</head>
<body style="background-color: #1c1c1c; color: white; text-align: center; font-family: Arial, sans-serif;">

    <h1>Acceso Biom√©trico</h1>
    <p>Mira fijamente a la c√°mara. Escaneando autom√°ticamente...</p>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alerta">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="marco-camara">
        <img src="{{ url_for('video_feed') }}" class="video-feed" alt="C√°mara">
        <div class="silueta-overlay"></div>
    </div>

    <br>

    <form action="/verificar_rostro_db" method="POST">
        <button type="submit" class="btn-entrar">üîì DETECTAR Y ENTRAR</button>
    </form>
    
    <br>
    <a href="/" style="color: #ffc107; text-decoration: none;">Volver al Inicio</a>
</body>
</html>